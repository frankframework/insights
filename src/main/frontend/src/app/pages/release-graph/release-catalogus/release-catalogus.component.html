<button
  class="release-btn"
  type="button"
  title="Show release info"
  aria-label="Show release info"
  [ngStyle]="{
    right: isSmallScreen ? 'auto' : this.authService.isAuthenticated() ? '12.5rem' : '6.5rem',
    left: isSmallScreen ? '1.25rem' : 'auto',
  }"
  (click)="toggleModal()"
>
  <img src="assets/icons/info-button.svg" alt="" width="36" height="36" />
</button>

@if (modalOpen) {
  <app-modal [title]="'Release Support'" (closed)="toggleModal()">
    <ng-container>
      <div class="release-modal-content">
        <h3 class="legend-section-title">Status</h3>

        <div class="release-content-item">
          <div class="release-content-item-icon">
            <img src="assets/icons/status-cutting-edge.svg" alt="" width="40" height="40" />
          </div>
          <p><strong>Cutting Edge</strong> - Master nightly build with latest features, may contain bugs</p>
        </div>

        <div class="release-content-item">
          <div class="release-content-item-icon">
            <img src="assets/icons/status-latest-stable.svg" alt="" width="40" height="40" />
          </div>
          <p><strong>Latest Stable</strong> - Most recent stable release with full support</p>
        </div>

        <div class="release-content-item">
          <div class="release-content-item-icon">
            <img src="assets/icons/status-supported.svg" alt="" width="40" height="40" />
          </div>
          <p><strong>Supported</strong> - Receives bug fixes and technical support</p>
        </div>

        <div class="release-content-item">
          <div class="release-content-item-icon">
            <img src="assets/icons/status-lts.svg" alt="" width="40" height="40" />
          </div>
          <p><strong>LTS</strong> - Major versions with extended support period</p>
        </div>

        <div class="release-content-item">
          <div class="release-content-item-icon">
            <img src="assets/icons/status-eol.svg" alt="" width="40" height="40" />
          </div>
          <p><strong>EOL</strong> - Only receives critical CVE security updates</p>
        </div>

        <div class="release-content-item">
          <div class="release-content-item-icon">
            <img src="assets/icons/status-historical.svg" alt="" width="40" height="40" />
          </div>
          <p><strong>Historical</strong> - No support, later patches are available</p>
        </div>

        <div class="release-content-item">
          <div class="release-content-item-icon">
            <img src="assets/icons/status-skipped.svg" alt="" width="40" height="40" />
          </div>
          <p><strong>Skipped Versions</strong> - Represents multiple unsupported versions</p>
        </div>

        <h3 class="legend-section-title">Branch Timeline</h3>

        <div class="release-content-item">
          <div class="release-content-item-icon support-timeline-icon">
            <div class="support-rectangle support-active"></div>
          </div>
          <p><strong>Active support window</strong> - Branch is receiving active development and bug fixes</p>
        </div>

        @if (showExtendedSupport) {
          <div class="release-content-item">
            <div class="release-content-item-icon support-timeline-icon">
              <div class="support-rectangle support-extended"></div>
            </div>
            <p><strong>Extended Support</strong> - Branch receives extended active development and bug fixes</p>
          </div>
        }

        <div class="release-content-item">
          <div class="release-content-item-icon support-timeline-icon">
            <div class="support-rectangle support-security"></div>
          </div>
          <p><strong>Security support window</strong> - Branch receives only security updates</p>
        </div>

        <div class="release-content-item">
          <div class="release-content-item-icon support-timeline-icon">
            <div class="support-rectangle support-unsupported"></div>
          </div>
          <p><strong>Historical support window</strong> - Shows when the branch was supported in the past</p>
        </div>

        @if (showExtendedSupport) {
          <p class="policy-text">
            Our extended support policy provides major versions with 18 months total support (6 months active + 6 months
            extended + 6 months security). For minor versions, the total support period is 9 months (3 months active + 3
            months extended + 3 months security).
          </p>
        } @else {
          <p class="policy-text">
            Our policy is to provide major versions with one year of security support and six months of technical
            support. For minor versions, these support periods are six months for security support and three months for
            technical support.
          </p>
        }
      </div>
    </ng-container>
  </app-modal>
}
