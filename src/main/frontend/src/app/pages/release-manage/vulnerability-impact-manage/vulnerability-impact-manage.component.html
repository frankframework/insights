<div class="vulnerability-manage-container">
  @if (!isLoading()) {
    <div class="header">
      <button class="back-button" (click)="goBack()">
        <img src="assets/icons/chevron-left.svg" alt="" width="20" height="20" />
        Back to Overview
      </button>

      <div class="header-titles">
        <h2>Manage Vulnerability Impact</h2>
      </div>
    </div>

    <div class="content">
      <app-vulnerability-impact-panel
        [vulnerabilities]="vulnerabilities()"
        [selectedVulnerabilityId]="selectedVulnerability()?.cveId ?? null"
        [searchQuery]="vulnerabilitySearchQuery()"
        (vulnerabilitySelected)="onVulnerabilitySelected($event)"
        (searchQueryChanged)="onSearchQueryChanged($event)"
      />

      <app-vulnerability-impact-details
        [vulnerability]="selectedVulnerability()"
        [isSaving]="isSaving()"
        (impactSaved)="onImpactSaved($event)"
        (impactDeleted)="onImpactDeleted()"
      />
    </div>
  } @else {
    <app-loader />
  }
</div>
